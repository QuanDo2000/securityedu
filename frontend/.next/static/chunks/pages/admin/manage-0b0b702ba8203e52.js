(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[112],{7361:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/manage",function(){return n(317)}])},6207:function(e,t,n){"use strict";var r=n(603),s=n(5893),i=n(1163),c=n(7294),a=n(4519),u=function(e){var t=e.children,n=(0,i.useRouter)(),u=(0,r.Z)(c.useState(!1),2),o=u[0],l=u[1];return c.useEffect(function(){(0,a.X)().then(function(e){e?l(!0):(l(!1),n.push("/login"))}).catch(function(){l(!1),n.push("/login")})},[n]),(0,s.jsx)(s.Fragment,{children:o&&t})};t.Z=u},7376:function(e,t,n){"use strict";n.d(t,{y:function(){return j}});var r=n(7568),s=n(655),i=n(5893),c=n(9008),a=n.n(c),u=n(1664),o=n.n(u),l=n(8721),h=n.n(l),d=n(5794),f=n.n(d),_=n(4519),x=n(7294),g=n(1163),m=n(7357),j="SecurityEdu",p=function(e){var t,n=e.children,c=e.home,u=e.admin,l=(0,g.useRouter)(),d=(0,x.useState)(!1),p=d[0],Z=d[1];(0,x.useEffect)(function(){(0,_.X)().then(function(e){Z(e)}).catch(function(){Z(!1)})});var v=(t=(0,r.Z)(function(e){var t,n,r;return(0,s.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,fetch("".concat(_.z,"/auth/logout"),{method:"POST",credentials:"include"})];case 1:return n=(t=e.sent()).json(),200===t.status?l.push("/"):console.log(n),[3,3];case 2:return r=e.sent(),console.log(r),[3,3];case 3:return[2]}})}),function(e){return t.apply(this,arguments)});return(0,i.jsxs)("div",{className:h().container,children:[(0,i.jsx)(a(),{children:(0,i.jsx)("meta",{name:"og:title",content:j})}),(0,i.jsx)("header",{className:h().header,children:c?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("h1",{className:f().heading2Xl,children:[j," ",u&&"Admin Page"]})}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("h1",{className:f().heading2Xl,children:(0,i.jsx)(o(),{href:u?"/admin":"/",children:(0,i.jsxs)("a",{className:f().colorInherit,children:[j," ",u&&"Admin Page"]})})})})}),(0,i.jsx)("main",{children:n}),(0,i.jsxs)("div",{className:h().footer,children:[!c&&!u&&(0,i.jsx)(o(),{href:"/",children:"← Back to home"}),!c&&u&&(0,i.jsx)(o(),{href:"/",children:"← Back to main site"}),!u&&(0,i.jsxs)(m.Z,{sx:{display:"flex"},children:[(0,i.jsx)(m.Z,{children:(0,i.jsx)(o(),{href:"/faq",children:"FAQ"})}),(0,i.jsx)(m.Z,{sx:{ml:"1rem"},children:(0,i.jsx)(o(),{href:"/search",children:"Search"})})]}),c&&p&&!u&&(0,i.jsx)(o(),{href:"/admin",children:"Admin"}),p&&u&&(0,i.jsx)(o(),{legacyBehavior:!1,href:"#",onClick:v,children:"Logout"}),c&&!p&&(0,i.jsx)(o(),{href:"/login",children:"Login"})]})]})};t.Z=p},4519:function(e,t,n){"use strict";n.d(t,{X:function(){return a},z:function(){return c}});var r,s=n(7568),i=n(655),c="http://20.185.25.136:8000",a=(r=(0,s.Z)(function(){var e,t;return(0,i.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,fetch("".concat(c,"/auth/user"),{method:"GET",credentials:"include"})];case 1:if(200===e.sent().status)return[2,!0];return[2,!1];case 2:return t=e.sent(),console.log(t),[2,!1];case 3:return[2]}})}),function(){return r.apply(this,arguments)})},317:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var r,s,i,c=n(7568),a=n(655),u=n(5893),o=n(9008),l=n.n(o),h=n(6207),d=n(7376),f=n(2882),_=n(629),x=n(7906),g=n(3184),m=n(3816),j=n(3252),p=n(295),Z=n(3321),v=n(868),y=n(6972),w=n(4519),b=(r=(0,c.Z)(function(){var e,t,n,r;return(0,a.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,fetch("".concat(w.z,"/api/list"))];case 1:return[4,e.sent().json()];case 2:return[2,e.sent().map(function(e){return{id:e.id,date:e.created_at,title:e.title,content:e.content}}).sort(function(e,t){return e.date<t.date?1:e.date>t.date?-1:0})];case 3:return r=e.sent(),console.log(r),[3,4];case 4:return[2,[]]}})}),function(){return r.apply(this,arguments)});(0,c.Z)(function(e){var t,n,r,s,i;return(0,a.__generator)(this,function(n){switch(n.label){case 0:t=Number(e),n.label=1;case 1:return n.trys.push([1,4,,5]),[4,fetch("".concat(w.z,"/api/list"))];case 2:return[4,n.sent().json()];case 3:return[2,n.sent().reduce(function(e,n){return n.category.includes(t)&&e.push({id:n.id,date:n.created_at,title:n.title}),e},[]).sort(function(e,t){return e.date<t.date?1:e.date>t.date?-1:0})];case 4:return i=n.sent(),console.log(i),[3,5];case 5:return[2,[]]}})}),(0,c.Z)(function(e){var t,n,r,s,i,c;return(0,a.__generator)(this,function(n){switch(n.label){case 0:t=Number(e),n.label=1;case 1:return n.trys.push([1,7,,8]),[4,fetch("".concat(w.z,"/api/getArticle?id=")+t)];case 2:return[4,n.sent().json()];case 3:if(!(r=n.sent()).content)return[3,5];return[4,(0,v.j)().use(y.Z).process(r.content)];case 4:return i=n.sent().toString(),[2,{id:r.id,title:r.title,date:r.created_at,content:i}];case 5:return[2,{id:r.id,title:r.title,date:r.created_at,content:r.content}];case 6:return[3,8];case 7:return c=n.sent(),console.log(c),[3,8];case 8:return[2,{}]}})});var k=n(7294),N=n(8078),S=function(){var e,t=(0,k.useState)([]),n=t[0],r=t[1],s=(0,k.useState)(!0),i=s[0],o=s[1];(0,k.useEffect)(function(){i&&b().then(function(e){r(e),o(!1)})},[i]);var v=(e=(0,c.Z)(function(e){var t,n,r;return(0,a.__generator)(this,function(s){switch(s.label){case 0:console.log("Delete post with ID ".concat(e)),s.label=1;case 1:return s.trys.push([1,4,,5]),[4,fetch("".concat(w.z,"/api/delete"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:e.toString()})})];case 2:return[4,(t=s.sent()).json()];case 3:return n=s.sent(),t.status,console.log(n),[3,5];case 4:return r=s.sent(),console.log(r),[3,5];case 5:return o(!0),[2]}})}),function(t){return e.apply(this,arguments)});return(0,u.jsx)(h.Z,{children:(0,u.jsxs)(d.Z,{admin:!0,children:[(0,u.jsx)(l(),{children:(0,u.jsx)("title",{children:"Admin Manage"})}),(0,u.jsx)(f.Z,{component:_.Z,sx:{maxHeight:"45rem"},children:i?(0,u.jsx)(N.Z,{variant:"rectangular",height:"80vh"}):(0,u.jsxs)(x.Z,{stickyHeader:!0,sx:{minWidth:650},children:[(0,u.jsx)(g.Z,{children:(0,u.jsxs)(m.Z,{children:[(0,u.jsx)(j.Z,{children:"ID"}),(0,u.jsx)(j.Z,{children:"Title"}),(0,u.jsx)(j.Z,{children:"Date Created"}),(0,u.jsx)(j.Z,{children:"Delete"})]})}),(0,u.jsx)(p.Z,{children:n.map(function(e){var t=e.id,n=e.date,r=e.title;return(0,u.jsxs)(m.Z,{children:[(0,u.jsx)(j.Z,{component:"th",scope:"row",children:t}),(0,u.jsx)(j.Z,{children:r}),(0,u.jsx)(j.Z,{children:n}),(0,u.jsx)(j.Z,{children:(0,u.jsx)(Z.Z,{variant:"outlined",onClick:function(){return v(t)},children:"Delete"})})]},t)})})]})})]})})}},8721:function(e){e.exports={container:"layout_container__fbLkO",header:"layout_header__kY0Lt",footer:"layout_footer__dka_2"}},5794:function(e){e.exports={heading2Xl:"utils_heading2Xl___9fFP",headingXl:"utils_headingXl__u25Y2",headingLg:"utils_headingLg__5535D",headingMd:"utils_headingMd__gD1Ok",borderCircle:"utils_borderCircle__s2nTm",colorInherit:"utils_colorInherit__mSH_x",padding1px:"utils_padding1px__PWQKR",margin1rem:"utils_margin1rem__wJACA",list:"utils_list__4Mu4l",listItem:"utils_listItem__s2m6i",lightText:"utils_lightText__eUzGY"}}},function(e){e.O(0,[767,113,573,774,888,179],function(){return e(e.s=7361)}),_N_E=e.O()}]);