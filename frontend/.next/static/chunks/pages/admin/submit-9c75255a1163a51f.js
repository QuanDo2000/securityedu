(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[943],{9509:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/submit",function(){return n(1922)}])},6207:function(e,t,n){"use strict";var r=n(603),i=n(5893),o=n(1163),s=n(7294),u=n(4519),c=function(e){var t=e.children,n=(0,o.useRouter)(),c=(0,r.Z)(s.useState(!1),2),a=c[0],l=c[1];return s.useEffect(function(){(0,u.X)().then(function(e){e?l(!0):(l(!1),n.push("/login"))}).catch(function(){l(!1),n.push("/login")})},[n]),(0,i.jsx)(i.Fragment,{children:a&&t})};t.Z=c},1922:function(e,t,n){"use strict";n.r(t);var r=n(7568),i=n(1799),o=n(9396),s=n(603),u=n(655),c=n(5893),a=n(7294),l=n(7357),d=n(1903),f=n(3321),h=n(6295),m=n(6901),p=n(7376),b=n(6207),g=n(9008),x=n.n(g),j=n(4519),v=function(){var e=(0,s.Z)(a.useState(""),2),t=e[0],n=e[1],g=(0,s.Z)(a.useState(""),2),v=g[0],Z=g[1],y=(0,s.Z)(a.useState([]),2),w=y[0],S=y[1],O=(0,s.Z)(a.useState(!1),2),_=O[0],P=O[1],k=(0,s.Z)(a.useState(""),2),C=k[0],E=k[1],T=(0,s.Z)(a.useState(null),2),D=T[0],N=T[1];a.useEffect(function(){0!==w.filter(function(e){if(!(e.match(/^[a-z0-9_\-]+$/i)||e.includes(" ")))return e}).length?P(!0):P(!1)},[w]);var W,F=function(e){e.target.files&&N(e.target.files[0])};a.useEffect(function(){if(D){var e=new FileReader;e.onload=function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.result;console.log(n),Z(n)},e.readAsText(D)}},[D]);var R=(W=(0,r.Z)(function(e){var t,r,i;return(0,u.__generator)(this,function(o){switch(o.label){case 0:e.preventDefault(),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,fetch("".concat(j.z,"/api/submit"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({title:e.currentTarget.postname.value,content:e.currentTarget.markdown.value,category:w.join(", ")})})];case 2:return[4,(t=o.sent()).json()];case 3:return r=o.sent(),200===t.status?(n(""),Z(""),S([]),E("Post submitted successfully")):(E("Some error occurred"),console.log(r)),[3,5];case 4:return i=o.sent(),E("Some error occurred"),console.log(i),[3,5];case 5:return[2]}})}),function(e){return W.apply(this,arguments)});return(0,c.jsx)(b.Z,{children:(0,c.jsxs)(p.Z,{admin:!0,children:[(0,c.jsx)(x(),{children:(0,c.jsx)("title",{children:"Admin Submit"})}),(0,c.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,c.jsx)("h2",{children:"Post Submission"}),""!==C&&(0,c.jsx)(m.Z,{severity:"info",sx:{mb:"1rem"},children:C}),(0,c.jsxs)(l.Z,{component:"form",onSubmit:R,noValidate:!0,sx:{mt:1},children:[(0,c.jsx)(d.Z,{required:!0,id:"postname",label:"Title",autoFocus:!0,fullWidth:!0,value:t,onChange:function(e){n(e.target.value)},sx:{mb:"1rem"}}),(0,c.jsx)(d.Z,{required:!0,id:"markdown",label:"Markdown",fullWidth:!0,multiline:!0,rows:10,value:v,onChange:function(e){Z(e.target.value)},sx:{mb:"1rem"}}),(0,c.jsxs)(f.Z,{variant:"contained",component:"label",sx:{mb:"1rem"},fullWidth:!0,children:["Upload Markdown",(0,c.jsx)("input",{hidden:!0,accept:".md",type:"file",onChange:F})]}),_&&(0,c.jsx)(m.Z,{severity:"error",sx:{mb:"1rem"},children:"Category name has invalid characters."}),(0,c.jsx)(h.Z,{sx:{mb:"1rem"},id:"category",multiple:!0,freeSolo:!0,autoSelect:!0,fullWidth:!0,options:w,value:w,onChange:function(e,t){t&&S(t)},renderInput:function(e){return(0,c.jsx)(d.Z,(0,o.Z)((0,i.Z)({},e),{label:"Categories",value:w}))}}),(0,c.jsx)(f.Z,{type:"submit",fullWidth:!0,variant:"contained",disabled:_||""===t||""===v||0===w.length,children:"Submit"})]})]})]})})};t.default=v},9396:function(e,t,n){"use strict";function r(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}n.d(t,{Z:function(){return r}})}},function(e){e.O(0,[767,113,141,859,569,295,96,774,888,179],function(){return e(e.s=9509)}),_N_E=e.O()}]);